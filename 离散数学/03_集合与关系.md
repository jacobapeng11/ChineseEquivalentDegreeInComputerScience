# 第3章 集合与关系

## 3.1 集合的概念、性质和基本运算

### 3.1.1 集合的基本概念

**集合**是数学中最基本的概念之一，是能被精确描述的确定对象的全体。集合中的对象称为**元素**或**成员**。

#### 集合的表示方法
1. **列举法**：将集合中的所有元素一一列出，如 A = {1, 2, 3}
2. **描述法**：用集合中元素的共同特征来表示，如 A = {x | x是小于5的正整数}

#### 基本关系
- **属于关系**：a∈A 表示元素a属于集合A
- **子集关系**：A⊆B 表示A是B的子集，即A中任意元素都属于B
- **真子集关系**：A⊂B 表示A是B的真子集，即A⊆B且A≠B

### 3.1.2 集合的基本运算

设A、B为任意两个集合：

1. **并集**：A∪B = {x | x∈A 或 x∈B}
2. **交集**：A∩B = {x | x∈A 且 x∈B}
3. **差集**：A-B = {x | x∈A 且 x∉B}
4. **对称差集**：A⊕B = (A-B)∪(B-A) = {x | x∈A 或 x∈B 但x∉A∩B}
5. **补集**：设全集为U，A的补集 A̅ = U-A = {x | x∈U 且 x∉A}
6. **笛卡尔积**：A×B = {(a,b) | a∈A, b∈B}

#### 运算性质
- **交换律**：A∪B = B∪A, A∩B = B∩A
- **结合律**：(A∪B)∪C = A∪(B∪C), (A∩B)∩C = A∩(B∩C)
- **分配律**：A∪(B∩C) = (A∪B)∩(A∪C), A∩(B∪C) = (A∩B)∪(A∩C)
- **德摩根律**：(A∪B)̅ = Ā∩B̄, (A∩B)̅ = Ā∪B̄

## 3.2 集合间的关系和特殊集合

### 3.2.1 集合间的关系

- **相等**：A = B 当且仅当 A⊆B 且 B⊆A
- **不相交**：A∩B = ∅，称A与B不相交
- **幂集**：集合A的所有子集构成的集合，记作P(A)或2^A

**例3.2.1** 若A = {a, b}，则P(A) = {∅, {a}, {b}, {a,b}}

### 3.2.2 特殊集合

1. **空集**：不含任何元素的集合，记作∅
2. **全集**：包含所讨论问题中所有元素的集合，记作U
3. **有限集**：元素个数有限的集合
4. **无限集**：元素个数无限的集合
5. **可数集**：元素能与自然数集建立一一对应关系的集合
6. **不可数集**：元素不能与自然数集建立一一对应关系的无限集

## 3.3 有限集合的基数，包含排斥原理

### 3.3.1 基数

集合A的**基数**（或**势**）是集合中元素的个数，记作|A|或#A。

#### 基本计数公式
1. |A∪B| = |A| + |B| - |A∩B|
2. |A∪B∪C| = |A| + |B| + |C| - |A∩B| - |A∩C| - |B∩C| + |A∩B∩C|

### 3.3.2 包含排斥原理

对于n个有限集合A₁, A₂, ..., Aₙ，有：

|A₁∪A₂∪...∪Aₙ| = Σ|Aᵢ| - Σ|Aᵢ∩Aⱼ| + Σ|Aᵢ∩Aⱼ∩Aₖ| - ... + (-1)^{n-1}|A₁∩A₂∩...∩Aₙ|

**例3.3.1** 某班有学生50人，其中选修数学的有30人，选修物理的有25人，同时选修数理的有15人。问至少选修一科的学生人数。

解：设A为选修数学的学生集合，B为选修物理的学生集合。
|A∪B| = |A| + |B| - |A∩B| = 30 + 25 - 15 = 40

## 3.4 集合论公理系统，无穷公理和自然数集合

### 3.4.1 集合论公理系统

Zermelo-Fraenkel集合论（ZF）包括：
1. **外延公理**：两个集合相等当且仅当它们有相同的元素
2. **空集公理**：存在空集
3. **无序对公理**：对任意对象x,y，存在集合{x,y}
4. **并集公理**：任意集合族的并集存在
5. **幂集公理**：任意集合的幂集存在
6. **无穷公理**：存在无穷集合
7. **分离公理模式**：任意集合的满足给定性质的元素构成子集
8. **替换公理模式**：函数的定义域为集合，则值域也为集合
9. **正则公理**：任意非空集合包含一个与之不交的元素
10. **选择公理**（ZFC）：任意非空集合族存在选择函数

### 3.4.2 自然数集合的构造

用集合论构造自然数：
- 0 := ∅
- 1 := {∅} = {0}
- 2 := {∅, {∅}} = {0, 1}
- 3 := {∅, {∅}, {∅, {∅}}} = {0, 1, 2}
- 一般地，n+1 := n ∪ {n}

## 3.5 二元关系的概念、关系矩阵和关系图

### 3.5.1 二元关系的定义

设A、B为集合，**二元关系**R是从A到B的一个子集，即R⊆A×B。
若(a,b)∈R，则称a与b有关系R，记作aRb。

当A=B时，称R为A上的**二元关系**。

### 3.5.2 关系矩阵

设A = {a₁, a₂, ..., aₘ}，B = {b₁, b₂, ..., bₙ}，R是从A到B的关系，则R的关系矩阵M_R = (rᵢⱼ)ₘₓₙ，其中：

rᵢⱼ = {
    1,  如果 aᵢRbⱼ
    0,  如果 aᵢRbⱼ不成立
}

### 3.5.3 关系图

对于A上的关系R，关系图G_R以A中元素为顶点，若aRb，则从a到b画一条有向边。

## 3.6 关系的逆、合成，关系的基本性质，关系的闭包

### 3.6.1 关系的逆

设R是从A到B的关系，则R的**逆关系**R⁻¹是从B到A的关系，定义为：
R⁻¹ = {(b,a) | (a,b)∈R}

### 3.6.2 关系的合成

设R是从A到B的关系，S是从B到C的关系，则R与S的**合成关系**R∘S是从A到C的关系，定义为：
R∘S = {(a,c) | ∃b∈B, (a,b)∈R 且 (b,c)∈S}

### 3.6.3 关系的基本性质

对于A上的关系R：

1. **自反性**：∀a∈A，有aRa
2. **反自反性**：∀a∈A，无aRa
3. **对称性**：∀a,b∈A，若aRb，则bRa
4. **反对称性**：∀a,b∈A，若aRb且bRa，则a=b
5. **传递性**：∀a,b,c∈A，若aRb且bRc，则aRc

### 3.6.4 关系的闭包

1. **自反闭包**r(R)：包含R的最小自反关系
2. **对称闭包**s(R)：包含R的最小对称关系
3. **传递闭包**t(R)：包含R的最小传递关系

**定理**：设R是A上的关系，则：
- r(R) = R ∪ I_A，其中I_A是A上的恒等关系
- s(R) = R ∪ R⁻¹
- t(R) = R ∪ R² ∪ R³ ∪ ...

## 3.7 等价关系和划分，偏序关系与哈斯图

### 3.7.1 等价关系

A上的关系R称为**等价关系**，如果R同时满足：
1. 自反性
2. 对称性
3. 传递性

**例3.7.1** 模n同余关系：设n为正整数，在整数集上定义关系R为aRb当且仅当n|(a-b)，则R是等价关系。

### 3.7.2 等价类

设R是A上的等价关系，对于任意a∈A，a的**等价类**为：
[a]_R = {x∈A | xRa}

**性质**：1) a∈[a]，2) [a]=[b] 或 [a]∩[b]=∅，3) ∪[a]=A

### 3.7.3 划分

集合A的一个**划分**是A的一些非空子集构成的集合π={A₁, A₂, ..., Aₖ}，满足：
1. Aᵢ≠∅ (i=1,2,...,k)
2. Aᵢ∩Aⱼ=∅ (i≠j)
3. A₁∪A₂∪...∪Aₖ=A

**定理**：集合A上的等价关系与A的划分一一对应。

### 3.7.4 偏序关系

A上的关系R称为**偏序关系**，如果R同时满足：
1. 自反性
2. 反对称性
3. 传递性

通常用符号≤表示偏序关系。偏序集记作<A,≤>。

**例3.7.2** 
- 整数集上的小于等于关系
- 集合上的包含关系
- 正整数集上的整除关系

### 3.7.5 哈斯图

哈斯图是表示有限偏序集的图形工具，它省略自回路（自反性）、箭头（传递性）和由传递性可推导的边。

## 3.8 任意集合上的函数定义与性质、特殊函数，满射、单射与双射

### 3.8.1 函数的定义

设A、B为集合，**函数**f:A→B是从A到B的特殊关系，满足：
对每个a∈A，存在唯一的b∈B，使得(a,b)∈f。
b称为a在f下的像，记作f(a)=b；a称为b的原像。

### 3.8.2 特殊函数

1. **恒等函数**：I_A:A→A，I_A(x)=x
2. **常函数**：f:A→B，对所有x∈A，f(x)=c（c为B中固定元素）
3. **包含函数**：设A⊆B，ι:A→B，ι(x)=x
4. **特征函数**：设A⊆U，χ_A:U→{0,1}，χ_A(x)=1当x∈A，χ_A(x)=0当x∉A

### 3.8.3 函数的性质

设f:A→B为函数：

1. **单射**（一对一）：∀a₁,a₂∈A，若a₁≠a₂，则f(a₁)≠f(a₂)
2. **满射**（映上）：∀b∈B，∃a∈A，使得f(a)=b
3. **双射**（一一对应）：既是单射又是满射

### 3.8.4 函数的运算

1. **复合函数**：设f:A→B，g:B→C，则g∘f:A→C，(g∘f)(x)=g(f(x))
2. **反函数**：若f:A→B为双射，则存在反函数f⁻¹:B→A

## 3.9 集合的势、无限集合的基数

### 3.9.1 集合的势

两个集合A、B**等势**（或对等），记作|A|=|B|，如果存在从A到B的一一对应函数。

- **有限集的势**：等于元素个数
- **无限集的势**：通过一一对应关系定义

### 3.9.2 无限集合的分类

- **可数集**：与自然数集N等势的集合，记作|A|=ℵ₀
- **不可数集**：与实数集R等势的集合，记作|A|=2^ℵ₀ 或 c

**例3.9.1**
- 自然数集N是可数集
- 整数集Z是可数集
- 有理数集Q是可数集
- 实数集R是不可数集

### 3.9.3 基数比较

设|A|、|B|分别为集合A、B的基数：
- |A|≤|B|，如果存在从A到B的单射
- |A|=|B|，如果存在从A到B的双射
- |A|<|B|，如果|A|≤|B|但|A|≠|B|

**Cantor定理**：对任意集合A，|A|<|P(A)|（A的幂集的势大于A的势）

## 本章小结

1. 集合是数学的基本概念，有列举法、描述法等表示方法
2. 基本集合运算包括并、交、差、补、笛卡尔积
3. 集合基数用于计算元素个数，包含排斥原理是重要计数工具
4. 二元关系是笛卡尔积的子集，有逆关系、合成关系等概念
5. 特殊关系包括等价关系（自反、对称、传递）和偏序关系（自反、反对称、传递）
6. 函数是特殊的二元关系，根据性质分为单射、满射、双射
7. 无限集合用基数分类，分为可数集和不可数集

## 课后练习

### 选择题

1. 设A = {1, 2, {3, 4}}，则以下哪个关系正确？
   A. {3,4} ⊆ A
   B. 3 ∈ A
   C. {3,4} ∈ A
   D. ∅ ∈ A

2. 设A = {0, 1}，B = {1, 2}，则A×B =：
   A. {(0,1), (0,2), (1,1), (1,2)}
   B. {(0,1), (1,2)}
   C. {0,1,2}
   D. {1}

3. 设A = {1, 2, 3}上的关系R = {(1,1), (2,2), (3,3), (1,2), (2,1)}，则R是：
   A. 等价关系
   B. 偏序关系
   C. 既不是等价关系也不是偏序关系
   D. 以上都不对

### 解答题

1. 设A = {1, 2, 3}，B = {2, 3, 4}，C = {3, 4, 5}，求A∪(B∩C)和(A∪B)∩(A∪C)，验证分配律。

2. 证明：对于任意集合A, B, C，有 A∩(B∪C) = (A∩B)∪(A∩C)

3. 设A = {a, b, c}，定义A上的关系R = {(a,a), (b,b), (c,c), (a,b), (b,c), (a,c)}，判断R的性质（自反、对称、反对称、传递），并说明是否为偏序关系或等价关系。

4. 设f: R→R, f(x) = 2x+1，g: R→R, g(x) = x²，求g∘f和f∘g，并判断f是否为双射。

### 练习题答案

#### 选择题

1. C - {3,4}是A的一个元素，所以{3,4}∈A
2. A - A×B是所有有序对的集合，即{(0,1), (0,2), (1,1), (1,2)}
3. A - R满足自反性(包含所有自反对)、对称性(每对都有反向对)、传递性，所以是等价关系

#### 解答题

1. 解：
   B∩C = {3}
   A∪(B∩C) = {1,2,3}∪{3} = {1,2,3}
   
   A∪B = {1,2,3,4}
   A∪C = {1,2,3,4,5}
   (A∪B)∩(A∪C) = {1,2,3,4}∩{1,2,3,4,5} = {1,2,3}
   
   所以A∪(B∩C) = (A∪B)∩(A∪C)，验证了分配律。

2. 证明：
   首先证明 A∩(B∪C) ⊆ (A∩B)∪(A∩C)：
   任取x∈A∩(B∪C)，则x∈A且x∈B∪C
   所以x∈A，且x∈B或x∈C
   若x∈B，则x∈A∩B，所以x∈(A∩B)∪(A∩C)
   若x∈C，则x∈A∩C，所以x∈(A∩B)∪(A∩C)
   总之，x∈(A∩B)∪(A∩C)
   
   再证明 (A∩B)∪(A∩C) ⊆ A∩(B∪C)：
   任取x∈(A∩B)∪(A∩C)，则x∈A∩B或x∈A∩C
   若x∈A∩B，则x∈A且x∈B，所以x∈A且x∈B∪C，即x∈A∩(B∪C)
   若x∈A∩C，则x∈A且x∈C，所以x∈A且x∈B∪C，即x∈A∩(B∪C)
   总之，x∈A∩(B∪C)
   
   因此，A∩(B∪C) = (A∩B)∪(A∩C)

3. 解：
   - 自反性：(a,a), (b,b), (c,c)∈R，满足自反性
   - 对称性：(a,b)∈R，但(b,a)∉R，不满足对称性
   - 反对称性：(a,b)∈R, (b,a)∉R，满足反对称性；(b,c)∈R, (c,b)∉R，满足反对称性。满足反对称性
   - 传递性：(a,b)∈R, (b,c)∈R → (a,c)∈R，满足传递性
   
   R是自反、反对称、传递的，所以是偏序关系，但不是等价关系（因不满足对称性）。

4. 解：
   (g∘f)(x) = g(f(x)) = g(2x+1) = (2x+1)²
   (f∘g)(x) = f(g(x)) = f(x²) = 2x²+1
   
   判断f是否为双射：
   - 单射：设f(x₁) = f(x₂)，即2x₁+1 = 2x₂+1，得x₁ = x₂，所以f是单射
   - 满射：任取y∈R，令x = (y-1)/2，则f(x) = 2×(y-1)/2+1 = y，所以f是满射
   - 因此f是双射