# 第二章：软件需求与软件需求规约

## 概述

软件需求与需求规约是软件工程的重要组成部分，涉及需求的定义、发现、分析、规约和管理。本章将详细阐述软件需求的定义和分类、需求发现技术以及需求规约的方法和格式。

### 软件需求的定义与分类

**软件需求的定义：**
软件需求是描述待开发系统必须具备的特性或能力，以及系统开发必须满足的约束条件。需求是从用户角度对软件行为的描述，是软件开发的基础和依据。

**软件需求的分类：**
根据软件工程考纲要求，软件需求包括：

1. **功能需求：** 描述系统应该做什么，包括输入、处理、输出等功能特性。功能需求说明了系统对特定输入应产生的输出行为。

2. **非功能需求：** 描述系统运行的品质或约束，包括性能、可靠性、可用性、安全性等。非功能需求规定了系统的质量属性。

3. **约束：** 描述系统开发或运行的限制条件，如设计约束、实现约束、接口约束、物理约束等。

**进一步分类：**
- **用户需求：** 从用户角度描述系统应该提供的服务和操作约束
- **系统需求：** 从系统角度描述系统功能、服务和约束
- **软件需求：** 软件系统的详细需求规格说明

## 需求发现技术

需求发现是获取用户需求的重要活动，根据软件工程考纲要求，主要包括以下技术：

### 常用的需求发现技术

1. **用户访谈：** 与用户进行面对面的交流，获取需求信息
   - 结构化访谈：有预设问题
   - 非结构化访谈：开放性对话
   - 半结构化访谈：结合两者

2. **问卷调查：** 通过标准化问卷收集大量用户的意见和需求
   - 适用于用户群体较大的情况
   - 可以量化用户需求的优先级

3. **观察：** 观察用户在实际工作环境中的操作过程
   - 发现用户未明确表达的需求
   - 了解实际工作流程

4. **小组会议(联合需求计划JRP)：** 组织用户、开发人员等参与的需求讨论会
   - 快速获取需求共识
   - 发现需求冲突和问题

5. **原型：** 构建系统原型以帮助用户明确需求
   - 抛弃式原型：用于需求验证
   - 演化式原型：逐步演进为最终系统

6. **头脑风暴：** 激发创新想法和需求
   - 鼓励自由思考
   - 产生大量创意

7. **场景分析：** 通过描述用户使用系统的情景来发现需求
   - 用例图和用户故事
   - 系统上下文图

### 需求发现的挑战

- **用户表达困难：** 用户可能无法准确表达需求
- **需求冲突：** 不同用户可能有冲突的需求
- **隐含需求：** 用户可能没有明确表达的需求
- **变化的需求：** 用户需求可能随时间变化
- **领域知识缺乏：** 开发人员可能缺乏相关领域的知识
- **用户参与度低：** 用户可能没有足够时间参与需求获取

## 需求分析

### 需求分析的目标

需求分析的目标是理解和分析用户需求，建立系统的抽象模型，为系统设计提供基础。需求分析需要对原始需求进行提炼、分析和综合。

### 需求分析的内容

1. **需求理解：** 深入理解用户的真实需求和业务背景
2. **需求建模：** 建立系统的需求模型
3. **需求验证：** 验证需求的正确性、一致性
4. **需求规格化：** 将需求转化为规范化的描述

### 需求建模方法

根据考纲要求，系统规约及软件设计包括结构化方法和面向对象方法：

1. **结构化分析方法：**
   - **数据流图(DFD)：** 描述数据在系统中的流动和处理过程
     - 外部实体：系统外部的数据来源或去向
     - 处理过程：对数据的处理或变换
     - 数据流：数据在系统中的流动
     - 数据存储：系统中存储的数据
   - **数据字典(DD)：** 定义数据流、数据存储和处理过程的详细信息
   - **加工说明：** 使用结构化语言、判定表、判定树描述处理逻辑

2. **面向对象分析方法：**
   - **用例图：** 描述系统功能和参与者的关系
   - **类图：** 描述系统中的类及其属性、方法和关系
   - **对象图：** 显示系统在特定时间点的对象实例
   - **序列图：** 描述对象间的交互顺序
   - **活动图：** 描述业务流程和操作的工作流程
   - **状态图：** 描述对象的状态转换

## 需求规约

### 需求规约的定义和格式

**需求规约：** 需求规约是软件需求的正式文档化描述，它是软件开发的重要依据，也是软件验收的标准。

### 需求规约的内容

根据考纲要求，需求规约应包括：

1. **引言：**
   - 编写目的
   - 项目背景
   - 定义、首字母缩写词
   - 参考资料
   - 文档概述

2. **项目概述：**
   - 产品概述
   - 产品功能
   - 用户特点
   - 约束
   - 假设和依赖

3. **功能需求：**
   - 功能描述
   - 输入输出说明
   - 处理过程
   - 性能要求
   - 优先级

4. **非功能需求：**
   - 性能需求
   - 安全性需求
   - 可靠性需求
   - 可用性需求
   - 可维护性需求

5. **接口需求：**
   - 用户接口
   - 硬件接口
   - 软件接口
   - 通信接口

### 需求规约的特性

- **正确性：** 需求必须正确反映用户的真实需求
- **无歧义性：** 每个需求应有明确的含义
- **完整性：** 需求应完整描述系统行为
- **一致性：** 需求之间不应有冲突
- **可验证性：** 需求应可验证是否实现
- **可理解性：** 需求应清晰易懂
- **可修改性：** 需求应结构化以便修改
- **可追踪性：** 需求应可追溯到来源

## 需求验证

### 需求验证的目标

需求验证的目标是确保需求规格说明书正确、完整、一致、可理解，确保需求能够满足用户的真正需要。

### 需求验证的方法

1. **需求评审：** 组织相关人员评审需求文档
2. **原型验证：** 通过原型验证需求的正确性
3. **模型检查：** 检查需求模型的一致性
4. **用户确认：** 与用户确认需求是否满足其需要
5. **走查：** 逐步检查需求文档的正确性

### 需求验证的检查点

- 需求是否正确反映了用户的实际需要
- 需求是否完整、没有遗漏
- 需求之间是否一致、没有冲突
- 需求是否清晰、没有二义性
- 需求是否现实、可以实现
- 需求是否可验证

## 需求管理

### 需求变更管理

**需求变更的原因：**
- 用户需求发生变化
- 业务环境发生变化
- 技术环境发生变化
- 对系统理解加深

**需求变更管理过程：**
1. **变更请求：** 提出需求变更请求
2. **变更评估：** 评估变更的影响和成本
3. **变更决策：** 决定是否接受变更
4. **变更实现：** 实现变更并跟踪
5. **变更验证：** 验证变更实现的正确性

### 需求跟踪

需求跟踪确保每个需求都被实现，并记录需求与设计、代码、测试之间的关系。

**跟踪类型：**
- **前向跟踪：** 需求到设计、实现的跟踪
- **后向跟踪：** 实现到需求的跟踪
- **影响分析：** 分析变更对其他部分的影响

## 本章练习题

### 选择题

1. 下列不属于软件需求分类的是：
   A. 功能需求
   B. 非功能需求
   C. 约束
   D. 设计需求

2. 常用的需求发现技术不包括：
   A. 用户访谈
   B. 问卷调查
   C. 观察
   D. 编码实现

3. 在结构化分析方法中，描述数据在系统中流动的是：
   A. 数据字典
   B. 数据流图
   C. 加工说明
   D. 实体关系图

4. 需求规约的特性不包括：
   A. 正确性
   B. 无歧义性
   C. 完整性
   D. 复杂性

5. 面向对象分析中用于描述系统功能和参与者关系的是：
   A. 类图
   B. 用例图
   C. 序列图
   D. 状态图

### 简答题

6. 说明软件需求的分类及其特点。

7. 比较结构化分析方法与面向对象分析方法的异同。

8. 分析需求管理的重要性及主要活动。

## 本章练习题答案解析

### 选择题答案

1. **答案：D**
   - 解析：软件需求的基本分类为功能需求、非功能需求和约束，不包括设计需求。

2. **答案：D**
   - 解析：编码实现属于开发阶段，不属于需求发现技术。需求发现技术包括用户访谈、问卷调查、观察、小组会议、原型等。

3. **答案：B**
   - 解析：在结构化分析方法中，数据流图(DFD)用于描述数据在系统中的流动和处理过程。

4. **答案：D**
   - 解析：需求规约的特性包括正确性、无歧义性、完整性、一致性、可验证性、可理解性、可修改性、可追踪性，不包括复杂性。

5. **答案：B**
   - 解析：在面向对象分析中，用例图用于描述系统功能和参与者之间的关系。

### 简答题答案

6. **答案：**
   软件需求的分类：
   1) 功能需求：描述系统应该做什么，包括输入、处理、输出等功能特性，说明系统对特定输入应产生的输出行为
   2) 非功能需求：描述系统运行的品质或约束，包括性能、可靠性、可用性、安全性等质量属性
   3) 约束：描述系统开发或运行的限制条件，如设计约束、实现约束、接口约束、物理约束等

7. **答案：**
   相同点：都是需求分析和设计的方法，目标都是建立系统的模型。

   不同点：
   结构化分析：
   - 以数据流为中心，关注数据的输入、处理、输出
   - 使用数据流图、数据字典等工具
   - 自顶向下、逐步求精
   - 适用于数据处理密集型系统

   面向对象分析：
   - 以对象为中心，关注对象及其交互
   - 使用用例图、类图、序列图等工具
   - 封装、继承、多态特性
   - 适用于大型复杂系统

8. **答案：**
   需求管理的重要性：
   1) 确保需求的完整性：跟踪所有需求的实现情况
   2) 控制需求变更：管理需求的变更过程，防止需求蔓延
   3) 保证可追溯性：确保开发、测试活动与需求对应
   4) 提高开发效率：减少因需求问题导致的返工

   主要活动：
   1) 需求变更管理：变更请求、评估、决策、实现、验证
   2) 需求跟踪：前向跟踪、后向跟踪、影响分析
   3) 需求版本控制：管理需求文档的版本
   4) 需求状态管理：跟踪需求的状态变化