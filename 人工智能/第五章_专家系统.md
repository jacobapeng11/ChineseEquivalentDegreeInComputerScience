# 第五章：专家系统及其结构

## 概述

专家系统是体现人类专家知识并能在特定领域解决问题的AI程序。它们是模拟人类专家决策能力的基于规则的系统。专家系统是AI技术最早的成功应用之一，在许多专业领域仍然很重要。

## 1. 专家系统介绍

### 定义和特征

**专家系统：** 模拟特定领域中人类专家决策能力的计算机程序，通过使用知识表示和推理机制实现。

**关键特征：**
1. **基于知识：** 包含特定领域的专家知识
2. **符号处理：** 使用符号和规则而非算法
3. **问题求解：** 解决特定领域的复杂问题
4. **解释能力：** 能够解释如何得出结论
5. **不确定性处理：** 能够处理不完整或不确定的信息

### 专家系统的应用

- **医疗诊断：** 用于细菌感染的MYCIN，用于内科医学的INTERNIST
- **地质勘探：** 用于矿物勘探的PROSPECTOR
- **金融规划：** 贷款申请评估、投资建议
- **制造业：** 质量控制、设计辅助
- **计算机系统：** 网络配置、故障诊断

## 2. 专家系统结构

### 五个组成部分

1. **知识库**
   - 包含来自领域专家的事实和规则
   - 表示特定领域的知识
   - 包括一般事实、启发式规则和案例示例

2. **推理引擎**
   - 控制推理过程
   - 将规则应用于事实以推导新结论
   - 实现正向和反向链式推理

3. **用户界面**
   - 促进用户与系统之间的通信
   - 以用户友好的格式呈现信息和查询
   - 可能包括解释功能

4. **解释功能**
   - 解释系统如何得出结论
   - 跟踪推理步骤
   - 证明系统的建议

5. **知识获取功能**
   - 帮助知识工程师从专家处提取知识
   - 构建和维护知识库
   - 通常包括用于规则编辑和验证的工具

## 3. 专家系统中的知识表示

### 基于规则的表示

专家系统中最常见的表示方法使用IF-THEN规则：

```
IF 条件(s) THEN 结论(s)
```

**示例：**
```
IF 病人发烧 AND 病人咳嗽 AND 病人疲劳
THEN 病人可能患流感
```

### 规则结构
- **前提（IF部分）：** 必须满足的条件
- **结论（THEN部分）：** 要采取的行动或结论
- **置信因子：** 不确定性的度量（在不确定系统中）

### 规则类型
1. **分类规则：** 确定项目属于什么类别
2. **因果规则：** 表示因果关系
3. **推理规则：** 从事实中推导新事实
4. **行动规则：** 指定要采取的行动

## 4. 专家系统中的推理

### 正向链式推理（数据驱动）
- 从已知事实开始并应用规则推导新事实
- 继续直到达到目标或没有更多规则可以应用
- 在事实已知但结论未知时效果良好

**算法：**
```
1. 将事实放入工作内存
2. 将规则与工作内存中的事实匹配
3. 选择要触发的规则
4. 触发规则（将新事实添加到工作内存）
5. 重复步骤2-4直到达到目标或没有规则触发
```

### 反向链式推理（目标驱动）
- 从假设开始并回溯寻找支持证据
- 在需要证明特定目标时更高效
- 在有许多可能结论时效果良好

**算法：**
```
1. 从要证明的目标开始
2. 找到结论与目标匹配的规则
3. 递归证明这些规则的前提
4. 如果前提为已知事实，则目标得到证明
```

### 链式推理方法比较

| 正向链式推理 | 反向链式推理 |
|--------------|--------------|
| 从事实开始 | 从目标开始 |
| 数据驱动 | 目标驱动 |
| 适合监控 | 适合诊断 |
| 可能探索许多路径 | 仅探索相关路径 |

## 5. 专家系统中的不确定性处理

### 确定性因子方法

**确定性因子（CF）：** 给定证据下对假设的置信度的度量。

**公式：** CF(H, E) = MB(H, E) - MD(H, E)
- MB：由于E对H的置信度增加
- MD：由于E对H的不置信度增加
- CF值范围从-1.0（确定为假）到+1.0（确定为真）

### 组合确定性因子

对于AND：CF_组合 = min(CF1, CF2, ..., CFn)
对于OR：CF_组合 = max(CF1, CF2, ..., CFn)

对于规则：CF(H) = CF(E) × CF(规则) 其中E是证据CF

**您的考试材料中的示例：**
给定：if E3 AND (E1 OR E2) THEN H={h1} cf={0.7}
CER(E3)=0.9, CER(E1)=0.5, CER(E2)=0.8

步骤1：CER(E1 OR E2) = max(0.5, 0.8) = 0.8
步骤2：CER(E3 AND (E1 OR E2)) = min(0.9, 0.8) = 0.8
步骤3：CER(H) = 0.8 × 0.7 = 0.56

### 贝叶斯网络
使用概率理论处理不确定性的替代方法。

## 6. 专家系统开发过程

### 阶段1：问题识别
- 定义领域和范围
- 识别目标用户
- 确定可行性
- 建立需求

### 阶段2：知识获取
- 采访领域专家
- 分析文档和案例
- 识别重要概念和关系
- 组织知识

### 阶段3：知识编码
- 选择适当的表示方法
- 在知识库中实现规则
- 验证知识准确性
- 测试初始系统

### 阶段4：系统开发
- 选择开发平台
- 实现推理引擎
- 设计用户界面
- 构建解释功能

### 阶段5：测试和验证
- 用真实案例测试
- 与专家决策进行验证
- 精炼知识库
- 执行敏感性分析

### 阶段6：部署和维护
- 在操作环境中部署
- 监控系统性能
- 根据需要更新知识
- 提供持续支持

## 7. 专家系统的优势和局限性

### 优势
1. **可用性：** 24/7可用，不会疲劳
2. **成本效益：** 开发后可多次使用
3. **一致性：** 提供一致的推理
4. **文档化：** 使专家知识明确化
5. **解释：** 能够解释推理过程
6. **分布式专业知识：** 可以合并多位专家的知识

### 局限性
1. **有限领域：** 通常限制在狭窄领域
2. **脆弱：** 在面对新情况时可能失败
3. **知识获取瓶颈：** 难以从专家处提取知识
4. **维护：** 知识库需要定期更新
5. **常识：** 缺乏常识推理
6. **学习：** 大多数系统无法从经验中学习

## 8. 专家系统壳

### 定义
专家系统壳是提供专家系统所需基本功能的软件环境，但不包含特定领域的知识。

### 流行的壳
- **EMYCIN：** MYCIN系统的扩展
- **CLIPS：** C语言集成生产系统
- **Jess：** Java专家系统壳
- **Prolog：** 通常用于专家系统的逻辑编程语言

### 壳功能
- 内置推理引擎
- 用户界面工具
- 解释功能
- 知识编辑工具
- 调试工具

## 9. 案例研究：MYCIN系统

### 概述
MYCIN是最早的专家系统之一，于1970年代在斯坦福大学开发，用于诊断细菌感染和推荐抗生素。

### 结构
- 60+识别传染性生物体的规则
- 300+选择治疗方法的规则
- 使用确定性因子处理不确定性
- 包含15个患者参数

### 关键特征
- 使用正向链式推理
- 处理复杂的医学推理
- 为推荐提供解释
- 演示专家系统的潜力

### 影响
- 影响专家系统研究
- 导致基于规则的系统发展
- 展示AI的实际应用

## 练习题与解答

### 问题1：正向vs反向链式推理
**问题：** 医疗专家系统需要确定患者是否患有罕见疾病。系统有许多症状作为输入，但只想确定特定疾病是否存在。哪种链式推理方法更合适，为什么？

**解答：** 反向链式推理更合适，因为：
- 目标（疾病存在）是具体的
- 有许多可能的症状但只有一个结论要验证
- 反向链式推理只会探索确认特定疾病的相关路径
- 当您有具体目标和大量数据时更高效

### 问题2：基于规则的推理
**问题：** 给定以下规则：
- R1: IF 发烧 AND 咳嗽 THEN 肺炎
- R2: IF 肺炎 THEN 开抗生素
- R3: IF 头痛 THEN 休息

如果患者发烧和咳嗽，可以得出什么结论？

**解答：**
使用正向链式推理：
1. 从发烧和咳嗽，以及规则R1：患者有肺炎
2. 从肺炎，以及规则R2：开抗生素
3. 关于规则R3没有结论（没有头痛）

结论：肺炎，开抗生素

### 问题3：确定性因子
**问题：** 给定：IF A AND B THEN H with CF = 0.9。如果CF(A) = 0.7和CF(B) = 0.6，计算CF(H)。

**解答：**
步骤1：CF(A AND B) = min(0.7, 0.6) = 0.6
步骤2：CF(H) = 0.6 × 0.9 = 0.54

### 问题4：专家系统组件
**问题：** 将专家系统组件与其功能匹配：
A. 知识库
B. 推理引擎
C. 解释功能
D. 用户界面

功能：
1. 控制推理过程
2. 包含领域知识
3. 解释推理步骤
4. 实现用户交互

**解答：**
A. 知识库 → 2. 包含领域知识
B. 推理引擎 → 1. 控制推理过程
C. 解释功能 → 3. 解释推理步骤
D. 用户界面 → 4. 实现用户交互

### 问题5：系统设计
**问题：** 对于汽车诊断专家系统，哪种知识表示方法最适宜，为什么？

**解答：** 基于规则的方法最适宜，因为：
- 汽车诊断涉及许多if-then规则（例如，IF引擎不启动AND电池良好THEN问题_是_启动器）
- 症状-原因关系可以自然地表示为规则
- 多个症状可能指向同一原因，基于规则的系统处理得很好
- 正向链式推理可以同时处理多个症状
- 规则对于机械师（领域专家）来说易于理解和验证
- 系统可以提供逐步诊断程序

## 要点总结

- 专家系统使用知识库和推理引擎模拟人类专家
- 它们由五个主要组件组成：知识库、推理引擎、用户界面、解释功能和知识获取功能
- 正向链式推理是数据驱动的；反向链式推理是目标驱动的
- 确定性因子为专家系统中的不确定性提供了一种处理方法
- 专家系统有明确的优势，但也存在重大局限性
- 开发过程需要仔细的知识获取和验证

## 附加练习题

### 高级问题1：冲突解决方案
**问题：** 在正向链式推理专家系统中，如果多个规则与工作内存匹配，选择触发哪个规则的策略是什么？

**解答：**
常见的冲突解决方案策略：
1. **优先级/词法排序：** 较高优先级的规则优先触发
2. **近期性：** 最近添加的事实有较高优先级
3. **特异性：** 更具体的规则在一般规则之前触发
4. **PEAS（问题环境执行器传感器）：** 基于智能体的PEAS描述

### 高级问题2：专家系统中的不确定性
**问题：** 给定三个规则：
- 规则1：IF A THEN B (CF = 0.7)
- 规则2：IF C THEN B (CF = 0.5)
- 规则3：IF D THEN B (CF = -0.4)

如果A、C和D都为真，假设CF(B)初始为0，最终CF(B)是什么？

**解答：**
步骤1：规则1触发：CF(B) = 0 + 0.7*(1-0) = 0.7
步骤2：规则2触发：组合CF = 0.7 + 0.5*(1-0.7) = 0.7 + 0.15 = 0.85
步骤3：规则3触发：由于CF为负，使用不同公式
CF(B) = 0.85 + (-0.4) = 0.85 - 0.4 = 0.45
或者使用适当的组合：当符号相同时CF_组合 = (CF1 + CF2) / (1 - min(|CF1|, |CF2|))，但当符号不同时：
CF_组合 = (CF1 + CF2) / (1 - min(|CF1|, |CF2|)) = (0.85 - 0.4) / (1 - 0.4) = 0.45 / 0.6 = 0.75

最终CF(B) = 0.75